import{r as v,E as i,O as b,F as g,G as s,H as aa,J as t,K as c,Q as f,N,R as K,P as q,L as y,M as F,T as h,q as Ke,av as la}from"./index.5d754d1d.js";import{m as R,h as Ve,i as se,j as ie,k as ue,l as ge}from"./QDialog.cb960128.js";import{Q as Ee,a as xe,b as Ae,c as De}from"./QTabPanels.2b5de4a1.js";import{b as ta,Q as oa,a as Qe}from"./QTable.fc5cb9a9.js";import{Q as $e,a as Ie}from"./QTd.2e60c6f1.js";import{Q as Oe,C as Ue}from"./ClosePopup.1644d9a9.js";import{a as x,Q as he}from"./QForm.260e6f42.js";import{c as re,b as na,Q as we}from"./QCard.09273f31.js";import{Q as ze}from"./QCardActions.fa0f34cc.js";import{i as sa,c as Y,e as de,g as ia,o as Z,a as ee,d as ae}from"./especifica-controller.e32a47fb.js";import{p as ua}from"./periodo-controller.575be260.js";import{d as ra}from"./distributivo.dc09f912.js";import{f as da}from"./downloadPdf.a5a82354.js";import"./QResizeObserver.b4e4b742.js";import"./touch.70a9dd44.js";const ca={class:"q-ma-md"},va={key:0},ma={class:"row justify-between"},fa=c("div",{class:"col-9"},[c("div",{class:"col q-table__title",inline:""},[c("b",null,"Gesti\xF3n del Informe Final")])],-1),pa={class:"col-3",align:"right"},ba={class:"col q-table__title"},ga={style:{display:"inline"}},Oa={style:{display:"inline"}},ha={style:{display:"inline"}},wa={class:"card-title-gestionar q-pa-md"},_a={class:"row justify-between items-center"},ka={key:0,class:"col-1"},ya={key:1,class:"col-1"},Ca={class:"col-9"},Na={class:"col-1"},Ka={class:"col-9"},Va={class:"col-1"},Ea={class:"text-h6"},xa={class:"row"},Aa={class:"col-10"},Da={class:"col-2",align:"right"},Qa={class:"row justify-between items-center"},$a={key:0,class:"col-1"},Ia={key:1,class:"col-1"},Ua={key:0,class:"col-8"},za={key:1,class:"col-8"},Pa={class:"col-2",align:"right"},Sa={key:0,class:"col-10"},qa={key:1,class:"col-10"},Fa={class:"col-2",align:"right"},Ta={class:"text-h6"},Ra={class:"q-ml-sm"},nl={__name:"MainPage",setup(ja){const r=aa(),ce=v(!1),V=v(null),Q=v(null),_=v(null),E=v(null),k=v(null),$=v(null),A=v(""),ve=v([]),p=v({id:null,nombre:null,evidencias:[],observaciones:[],desarrolladas:[]}),I=v("actividadesdesarrolladas"),le=v(null),te=v(null),B=v(!1),_e=na(),me=v(""),fe=v(!1),U=v(""),j=v(""),G=v(0),oe=v([]),m=v(null),ne=v({estado:!1}),T=v(null),L=v([]),D=v([]),z=v(null),M=v(!1),Pe=[{name:"nombre",label:"Nombre",sortable:!0,field:"nombre",align:"left"},{name:"horas",label:"Horas",sortable:!1,field:"horas",align:"center"},{name:"actividadDesarrollada",label:"Actividades Desarrolladas",sortable:!1,field:"actividadDesarrollada",align:"center"},{name:"evidencia",label:"Evidencias",sortable:!1,field:"evidencia",align:"center"},{name:"observacion",label:"Observaciones",sortable:!1,field:"observacion",align:"center"}],w=v("false"),P=v(null),C=v(null),Se=async()=>{await ua.obtenerUltimoPeriodo(l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK",l.message);ne.value=l.data.periodo,qe()})},qe=async()=>{await sa.obtenerInformePeriodo(ne.value.nombre,async l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK",l.message);T.value=l.data.informeFinal,await Fe(),H(),J()})},H=async()=>{await Y.obtenerPorInforme(T.value._id,l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK","Ocurri\xF3 un error al obtener las"+T.value.conclusionesRecomendaciones);ve.value=l.data})},Fe=async()=>{await ra.obtenerTodasActividades(l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK",l.message);L.value=l.data.actividades.funcionesSustantivas;for(let e=0;e<L.value.length;e++)D.value.push({nombre:L.value[e].nombre,actividadesEspecificas:[]});z.value=D.value[0].nombre})},J=async()=>{await de.obtenerActividadesPorInforme(T.value._id,l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK",l.message);const e=l.data.actividadesEspecificas;for(let a=0;a<D.value.length;a++)D.value[a].actividadesEspecificas=[];for(let a=0;a<e.length;a++)for(let u=0;u<D.value.length;u++)e[a].actividadDistributivo.funcionSustantiva.nombre==D.value[u].nombre&&D.value[u].actividadesEspecificas.push(e[a])})},Te=async()=>{await da.obtenerInformeActivo(l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK",l.message);m.value=l.data,p.value.informacion=[],p.value.informacion.push({nombre:m.value.actividadesDesarrolladas,data:[]}),p.value.informacion.push({nombre:m.value.evidencias,data:[]}),p.value.informacion.push({nombre:m.value.observaciones,data:[]})})};function Re(l){te.value=l,B.value=!0}async function je(){await de.eliminarActividad(te.value._id,l=>{if(l.status==401)return n("NO OK",l.message),r.push({path:"/login"});if(l.status==403)return n("NO OK",l.message),r.push({path:"/"});if(l.status!=200)return n("NO OK","Ocurri\xF3 un error al eliminar la actividad");J(),te.value=null,B.value=!1})}function ke(){oe.value=[];const l=L.value.filter(e=>e.nombre==z.value);for(let e=0;e<l[0].actividadesDistributivo.length;e++)oe.value.push(l[0].actividadesDistributivo[e].sigla)}async function Be(){await W(),ke(),me.value="Agregar nueva actividad de: ",M.value=!0}async function Ge(l){if(A.value==null||A.value=="")return;const e={nombre:A.value};await Y.editar(l,e,a=>a.status==401?(n("NO OK",a.message),r.push({path:"/"})):a.status==403?(n("NO OK",a.message),r.push({path:"/"})):a.status!=200?n("NO OK","Ocurri\xF3 un error al guardar la informaci\xF3n"):(n("OK","Campo editato con \xE9xito"),A.value=null,$.value=null,H()))}async function Le(l){A.value=null,$.value=null,await Y.eliminar(l,e=>e.status==401?(n("NO OK",e.message),r.push({path:"/"})):e.status==403?(n("NO OK",e.message),r.push({path:"/"})):e.status!=200?n("NO OK","Error al eliminar"):(n("OK","Item eliminado con \xE9xito"),H()))}async function Me(){if(A.value=null,$.value=null,Q.value==null||Q.value=="")return;const l={nombre:Q.value,informe:T.value._id};await Y.crear(l,e=>e.status==401?(n("NO OK",e.message),r.push({path:"/"})):e.status==403?(n("NO OK",e.message),r.push({path:"/"})):e.status!=200?n("NO OK",e.message):(n("OK","Informaci\xF3n guardada con \xE9xito"),Q.value=null,H()))}async function He(l){await W(),ke(),me.value="Editar actividad espec\xEDfica",fe.value=!0,U.value=l.row.nombre.split("-")[0],j.value=l.row.nombre.substring(U.value.length+1,l.row.nombre.length).split("_").join(" "),G.value=l.row.horas,M.value=!0,le.value=l.row}async function Je(){const l={nombre:U.value+"-"+j.value.replace(/\s+/g,"_"),horas:+G.value},a=L.value.filter(u=>u.nombre==z.value)[0].actividadesDistributivo.filter(u=>u.sigla==U.value);fe.value?(U.value!=le.value.actividadDistributivo.sigla&&(l.actividadesDistributivo=a[0]._id),await de.editarActividad(le.value._id,l,u=>{if(u.status==401)return n("NO OK",u.message),r.push({path:"/login"});if(u.status==403)return n("NO OK",u.message),r.push({path:"/"});if(u.status!=200)return n("NO OK","Ocurri\xF3 un error al editar la actividad");n("OK","Actividad editada con \xE9xito"),W(),J()})):await de.crearActividad(T.value._id,a[0]._id,l,u=>{if(u.status==401)return n("NO OK",u.message),r.push({path:"/login"});if(u.status==403)return n("NO OK",u.message),r.push({path:"/"});if(u.status!=200)return n("NO OK","Ocurri\xF3 un error al guardar la actividad");n("OK","Actividad guardada con \xE9xito"),W(),J()})}async function W(){M.value=!1,fe.value=!1,le.value=null,j.value="",G.value=0,U.value="",oe.value=[]}async function pe(l){let e={actividadEspecifica:l},a=null;switch(I.value){case m.value.actividadesDesarrolladas:if(V.value==null||V.value=="")return V.value="";e.nombre=V.value,a=await ae.crearDesarrollada(e),V.value=null;break;case m.value.evidencias:if(_.value==null)return _.value="";e.nombre=_.value,a=await ee.crearEvidencia(e),_.value=null;break;case m.value.observaciones:if(E.value==null||E.value=="")return E.value="";if(k.value!=null&&k.value!=""&&!be(k.value))return;e.nombre=E.value,k.value!=null&&k.value!=""&&(e.enlace=k.value),a=await Z.crearObservacion(e),E.value=null,k.value=null;break}if(a.status==401)return n("NO OK",a.message),r.push({path:"/login"});if(a.status==403)return n("NO OK",a.message),r.push({path:"/"});if(a.status!=200)return n("NO OK",a.message);n("OK",a.data.message),X(l)}async function ye(l){if(w.value==null||w.value=="")return;let e={nombre:w.value},a=null;switch(I.value){case m.value.actividadesDesarrolladas:a=await ae.editarDesarrollada(l,e);break;case m.value.evidencias:a=await ee.editarEvidencia(l,e);break;case m.value.observaciones:(C.value!=null||C.value!="")&&(e.enlace=C.value),a=await Z.editarObservacion(l,e);break}if(a.status==401)return n("NO OK",a.message),r.push({path:"/"});if(a.status==403)return n("NO OK",a.message),r.push({path:"/"});if(a.status!=200)return n("NO OK",a.message);n("OK","Item eliminado con \xE9xito"),X(p.value.id),w.value=null,P.value=null,C.value=null}async function We(l){w.value=null,P.value=null,C.value=null;let e=null;switch(I.value){case m.value.actividadesDesarrolladas:e=await ae.eliminarDesarrollada(l);break;case m.value.evidencias:e=await ee.eliminarEvidencia(l);break;case m.value.observaciones:e=await Z.eliminarObservacion(l);break}if(e.status==401)return n("NO OK",e.message),r.push({path:"/login"});if(e.status==403)return n("NO OK",e.message),r.push({path:"/"});if(e.status!=200)return n("NO OK",e.message);n("OK","Item eliminado con \xE9xito"),X(p.value.id)}async function Xe(l,e){X(l,e),I.value=m.value.actividadesDesarrolladas,ce.value=!0}async function X(l,e){V.value=null,_.value=null,E.value=null,k.value=null,await ee.obtenerEvidencias(l,async a=>{if(a.status==401)return n("NO OK",a.message),r.push({path:"/"});if(a.status==403)return n("NO OK",a.message),r.push({path:"/"});if(a.status!=200)return n("NO OK","Ocurri\xF3 un error al gestionar la actividad");const u=a.data.evidencias;await ae.obtenerDesarrolladas(l,async o=>{if(o.status==401)return n("NO OK",o.message),r.push({path:"/"});if(o.status==403)return n("NO OK",o.message),r.push({path:"/"});if(o.status!=200)return n("NO OK","Ocurri\xF3 un error al gestionar la actividad");const O=o.data.actividadesDesarrolladas;await Z.obtenerObservaciones(l,d=>{if(d.status==401)return n("NO OK",d.message),r.push({path:"/"});if(d.status==403)return n("NO OK",d.message),r.push({path:"/"});if(d.status!=200)return n("NO OK","Ocurri\xF3 un error al gestionar la actividad");const ea=d.data.observaciones;p.value.id=l,p.value.nombre=e;for(let S=0;S<p.value.informacion.length;S++)p.value.informacion[S].nombre==m.value.actividadesDesarrolladas?p.value.informacion[S].data=O:p.value.informacion[S].nombre==m.value.evidencias?p.value.informacion[S].data=u:p.value.informacion[S].nombre==m.value.observaciones&&(p.value.informacion[S].data=ea)})})})}async function Ce(l,e){A.value=null,$.value=null,await Y.editar(l,{orden:e}),H()}async function Ne(l,e){P.value=null,w.value=null,C.value=null;const a={orden:e};switch(I.value){case m.value.actividadesDesarrolladas:await ae.editarDesarrollada(l._id,a);break;case m.value.evidencias:await ee.editarEvidencia(l._id,a);break;case m.value.observaciones:await Z.editarObservacion(l._id,a);break}await X(p.value.id)}function Ye(){ia.generarPDF(T.value._id,D.value,ne.value.nombre)}function be(l){var e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return e.test(l)}function Ze(l){w.value="",P.value=null}const n=(l,e)=>{l=="OK"?_e.notify({color:"green-5",textColor:"white",icon:"mdi-check-bold",message:e}):_e.notify({color:"red-5",textColor:"white",icon:"warning",message:e})};return Te(),Se(),(l,e)=>(i(),b("div",ca,[ne.value.estado?(i(),g(re,{key:1,class:"my-card"},{default:s(()=>[t(R,{class:"card-title-gestionar"},{default:s(()=>[c("div",ma,[fa,c("div",pa,[t(f,{size:"sm",color:"positive",onClick:e[0]||(e[0]=a=>Ye())},{default:s(()=>[N("Descargar Informe")]),_:1})])])]),_:1}),t(Ee,{"indicator-color":"white",modelValue:z.value,"onUpdate:modelValue":e[1]||(e[1]=a=>z.value=a),dense:"",class:"bg-primary text-white shadow-2","inline-label":"","outside-arrows":"","mobile-arrows":""},{default:s(()=>[(i(!0),b(K,null,q(D.value,(a,u)=>(i(),g(Ae,{key:u,label:a.nombre,name:a.nombre},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),t(xe,{class:"bg-blue-1",modelValue:z.value,"onUpdate:modelValue":e[2]||(e[2]=a=>z.value=a),animated:""},{default:s(()=>[(i(!0),b(K,null,q(D.value,(a,u)=>(i(),g(De,{key:u,name:a.nombre},{default:s(()=>[(i(),g(oa,{dense:"",columns:Pe,rows:a.actividadesEspecificas,"row-key":"name","no-data-label":"No existen actividades espec\xEDficas",key:"table-"+u,pagination:{rowsPerPage:10},"rows-per-page-options":[5,10,0],"rows-per-page-label":"Resultados por p\xE1gina"},{top:s(()=>[c("div",ba,[c("b",null,"Actividades de: "+y(z.value),1)]),t(f,{onClick:Be,size:"sm",class:"col-2 bton-lista-docente",color:"blue-7",style:{color:"white"}},{default:s(()=>[N("Nueva Actividad")]),_:1})]),header:s(o=>[t($e,{props:o},{default:s(()=>[(i(!0),b(K,null,q(o.cols,O=>(i(),g(Qe,{key:O.name,props:o},{default:s(()=>[N(y(O.label),1)]),_:2},1032,["props"]))),128)),t(Qe,{"auto-width":""},{default:s(()=>[N("Acciones")]),_:1})]),_:2},1032,["props"])]),body:s(o=>[t($e,{props:o},{default:s(()=>[(i(!0),b(K,null,q(o.cols,O=>(i(),g(Ie,{key:O.name,props:o},{default:s(()=>[N(y(O.value),1)]),_:2},1032,["props"]))),128)),t(Ie,{align:"center","auto-width":"",class:"q-pa-md q-gutter-xs"},{default:s(()=>[c("div",ga,[t(f,{size:"sm",color:"positive",round:"",dense:"",icon:"mdi-folder-edit",onClick:O=>Xe(o.row._id,o.row.nombre)},null,8,["onClick"]),t(Oe,{offset:[10,10],class:"bg-indigo"},{default:s(()=>[N(" Gestionar campos actividad ")]),_:1})]),c("div",Oa,[t(f,{size:"sm",color:"warning",round:"",dense:"",onClick:O=>He(o),icon:"mdi-file-document-edit"},null,8,["onClick"]),t(Oe,{offset:[10,10],class:"bg-indigo"},{default:s(()=>[N(" Editar informaci\xF3n actividad ")]),_:1})]),c("div",ha,[t(f,{size:"sm",color:"negative",round:"",dense:"",onClick:O=>Re(o.row),icon:"mdi-delete"},null,8,["onClick"]),t(Oe,{offset:[10,10],class:"bg-indigo"},{default:s(()=>[N(" Eliminar actividad ")]),_:1})])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["rows"]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),c("div",wa,[c("b",null,y(m.value.conclusiones),1)]),t(R,{class:"q-px-lg bg-blue-1"},{default:s(()=>[t(Ve,{bordered:"",separator:"",dense:"",class:"bg-white"},{default:s(()=>[t(se,null,{default:s(()=>[t(ie,{caption:""},{default:s(()=>[t(ue,null,{default:s(()=>[t(x,{"bottom-slots":"",modelValue:Q.value,"onUpdate:modelValue":e[4]||(e[4]=a=>Q.value=a),label:`Agregar ${m.value.conclusiones}`,dense:"",type:"text",autogrow:"",rules:[a=>a&&a.length>0||a==null||"Complete este campo"]},{append:s(()=>[Q.value!==""&&Q.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[3]||(e[3]=a=>Q.value=null),class:"cursor-pointer"})):h("",!0),t(f,{round:"",dense:"",flat:"",icon:"add",onClick:Me})]),_:1},8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(i(!0),b(K,null,q(ve.value,(a,u)=>(i(),g(se,{key:u},{default:s(()=>[t(ie,null,{default:s(()=>[t(ue,null,{default:s(()=>[c("div",_a,[$.value!=u?(i(),b("div",ka,[t(f,{flat:"",icon:"mdi-chevron-up",color:"grey-7",size:"xs",round:"",disable:u==0,onClick:o=>Ce(a._id,u+1-1)},null,8,["disable","onClick"]),t(f,{flat:"",icon:"mdi-chevron-down",color:"grey-7",size:"xs",round:"",disable:u==ve.value.length-1,onClick:o=>Ce(a._id,u+1+1)},null,8,["disable","onClick"])])):h("",!0),$.value!=u?(i(),b("div",ya,[c("b",null,y(u+1+". "),1)])):h("",!0),$.value!=u?(i(),b(K,{key:2},[c("div",Ca,y(a.nombre),1),c("div",Na,[t(f,{color:"amber",flat:"",round:"",size:"sm",icon:"mdi-file-edit-outline",onClick:o=>{$.value=u,A.value=a.nombre}},null,8,["onClick"]),t(f,{color:"red",flat:"",round:"",size:"sm",icon:"mdi-trash-can-outline",onClick:o=>Le(a._id)},null,8,["onClick"])])],64)):(i(),b(K,{key:3},[c("div",Ka,[t(x,{"bottom-slots":"",modelValue:A.value,"onUpdate:modelValue":e[5]||(e[5]=o=>A.value=o),label:"Editar",dense:"",autogrow:"",rules:[o=>o&&o.length>0||o==null||"Este campo no puede estar vac\xEDo"]},null,8,["modelValue","rules"])]),c("div",Va,[t(f,{color:"positive",flat:"",round:"",size:"sm",icon:"mdi-check-bold",onClick:o=>Ge(a._id)},null,8,["onClick"]),t(f,{color:"red",flat:"",round:"",size:"sm",icon:"close",onClick:e[6]||(e[6]=o=>$.value=null)})])],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(ge,{modelValue:ce.value,"onUpdate:modelValue":e[29]||(e[29]=a=>ce.value=a),persistent:""},{default:s(()=>[t(re,{style:{"max-width":"700px"}},{default:s(()=>[t(R,{class:"card-title-gestionar"},{default:s(()=>[c("div",Ea,"Actividad Especifica: "+y(p.value.nombre),1)]),_:1}),t(Ee,{"onUpdate:modelValue":[Ze,e[7]||(e[7]=a=>I.value=a)],"indicator-color":"secondary",modelValue:I.value,dense:"","outside-arrows":"","mobile-arrows":"",class:"bg-primary text-white shadow-2","inline-label":"","no-caps":""},{default:s(()=>[(i(!0),b(K,null,q(p.value.informacion,(a,u)=>(i(),g(Ae,{key:u,name:a.nombre,label:a.nombre},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),t(R,{style:{"max-height":"50vh","min-height":"50vh","max-width":"550px"},class:"scroll no-margin no-padding"},{default:s(()=>[t(xe,{modelValue:I.value,"onUpdate:modelValue":e[27]||(e[27]=a=>I.value=a)},{default:s(()=>[(i(!0),b(K,null,q(p.value.informacion,(a,u)=>(i(),g(De,{key:u,name:a.nombre},{default:s(()=>[t(Ve,{bordered:"",separator:"",dense:""},{default:s(()=>[t(se,null,{default:s(()=>[t(ie,null,{default:s(()=>[t(ue,null,{default:s(()=>[a.nombre==m.value.actividadesDesarrolladas?(i(),g(x,{key:0,"bottom-slots":"",modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=o=>V.value=o),label:"Nueva actividad desarrollada",dense:"",autogrow:"",rules:[o=>o&&o.length>0||o==null||"Complete este campo"]},{append:s(()=>[V.value!==""&&V.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[8]||(e[8]=o=>V.value=null),class:"cursor-pointer"})):h("",!0),t(f,{onClick:e[9]||(e[9]=o=>pe(p.value.id)),round:"",dense:"",flat:"",icon:"add"})]),_:1},8,["modelValue","rules"])):h("",!0),a.nombre==m.value.evidencias?(i(),g(x,{key:1,"bottom-slots":"",modelValue:_.value,"onUpdate:modelValue":e[13]||(e[13]=o=>_.value=o),label:"Nueva evidencia",dense:"",rules:[o=>o&&o.length>0||o==null||"Complete este campo"],autogrow:""},{append:s(()=>[_.value!==""&&_.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[11]||(e[11]=o=>_.value=null),class:"cursor-pointer"})):h("",!0),t(f,{onClick:e[12]||(e[12]=o=>pe(p.value.id)),round:"",dense:"",flat:"",icon:"add"})]),_:1},8,["modelValue","rules"])):h("",!0),a.nombre==m.value.observaciones?(i(),g(he,{key:2,onSubmit:e[18]||(e[18]=o=>pe(p.value.id)),dense:""},{default:s(()=>[t(x,{"bottom-slots":"",modelValue:E.value,"onUpdate:modelValue":e[15]||(e[15]=o=>E.value=o),dense:"",label:"Nueva observaci\xF3n",autogrow:"",rules:[o=>o&&o.length>0||o==null||"Complete este campo"]},{append:s(()=>[E.value!==""&&E.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[14]||(e[14]=o=>E.value=null),class:"cursor-pointer"})):h("",!0)]),_:1},8,["modelValue","rules"]),c("div",xa,[c("div",Aa,[t(x,{"bottom-slots":"",modelValue:k.value,"onUpdate:modelValue":e[17]||(e[17]=o=>k.value=o),label:"Enlace (opcional)",hint:"Formato http:// o https://",dense:"",autogrow:"",rules:[o=>o==""||o==null||o&&o.length>0&&be(o)||"No es un enlace v\xE1lido"]},{append:s(()=>[k.value!==""&&k.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[16]||(e[16]=o=>k.value=null),class:"cursor-pointer"})):h("",!0)]),_:1},8,["modelValue","rules"])]),c("div",Da,[t(f,{class:"q-mt-md",type:"submit",color:"grey-7",dense:"",flat:"",round:"",icon:"add"})])])]),_:1})):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),(i(!0),b(K,null,q(a.data,(o,O)=>(i(),g(se,{key:O},{default:s(()=>[t(ie,null,{default:s(()=>[t(ue,null,{default:s(()=>[c("div",Qa,[P.value!=O?(i(),b("div",$a,[t(f,{flat:"",icon:"mdi-chevron-up",color:"grey-7",size:"xs",round:"",disable:O==0,onClick:d=>Ne(o,O+1-1)},null,8,["disable","onClick"]),t(f,{flat:"",icon:"mdi-chevron-down",color:"grey-7",size:"xs",round:"",disable:O==a.data.length-1,onClick:d=>Ne(o,O+1+1)},null,8,["disable","onClick"])])):h("",!0),P.value!=O?(i(),b("div",Ia,[c("b",null,y(O+1+". "),1)])):h("",!0),P.value!=O?(i(),b(K,{key:2},[o.enlace?(i(),b("div",Ua,[N(y(o.nombre)+" ",1),t(f,{tag:"a",href:o.enlace,target:"_blank",size:"xs",icon:"mdi-link",flat:"",color:"blue-12"},null,8,["href"])])):(i(),b("div",za,y(o.nombre),1)),c("div",Pa,[t(f,{color:"amber",flat:"",round:"",size:"xs",icon:"mdi-file-edit-outline",onClick:d=>{P.value=O,w.value=o.nombre,C.value=o.enlace?o.enlace:null}},null,8,["onClick"]),t(f,{color:"red",flat:"",round:"",size:"xs",icon:"mdi-trash-can-outline",onClick:d=>We(o._id)},null,8,["onClick"])])],64)):(i(),b(K,{key:3},[a.nombre==m.value.observaciones?(i(),b("div",Sa,[a.nombre==m.value.observaciones?(i(),g(he,{key:0,onSubmit:e[23]||(e[23]=d=>ye(p.value.id)),dense:""},{default:s(()=>[t(x,{"bottom-slots":"",modelValue:w.value,"onUpdate:modelValue":e[20]||(e[20]=d=>w.value=d),label:"Editar",dense:"",autogrow:"",rules:[d=>d&&d.length>0||d==null||"Complete este campo"]},{append:s(()=>[w.value!==""&&w.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[19]||(e[19]=d=>w.value=null),class:"cursor-pointer"})):h("",!0)]),_:1},8,["modelValue","rules"]),t(x,{"bottom-slots":"",modelValue:C.value,"onUpdate:modelValue":e[22]||(e[22]=d=>C.value=d),label:"Enlace (opcional)",hint:"Formato http:// o https://",dense:"",autogrow:"",rules:[d=>d==""||d==null||d&&d.length>0&&be(d)||"No es un enlace v\xE1lido"]},{append:s(()=>[C.value!==""&&C.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[21]||(e[21]=d=>C.value=null),class:"cursor-pointer"})):h("",!0)]),_:1},8,["modelValue","rules"])]),_:1})):h("",!0)])):(i(),b("div",qa,[t(x,{"bottom-slots":"",modelValue:w.value,"onUpdate:modelValue":e[25]||(e[25]=d=>w.value=d),style:{width:"100%"},width:"100%",dense:"",autogrow:"",rules:[d=>d&&d.length>0||d==null||"Este campo no puede estar vacio"]},{append:s(()=>[_.value!==""&&_.value!=null?(i(),g(F,{key:0,name:"close",onClick:e[24]||(e[24]=d=>_.value=null),class:"cursor-pointer"})):h("",!0)]),_:1},8,["modelValue","rules"])])),c("div",Fa,[t(f,{color:"positive",flat:"",round:"",size:"sm",icon:"mdi-check-bold",onClick:d=>ye(o._id)},null,8,["onClick"]),t(f,{color:"red",flat:"",round:"",size:"sm",icon:"close",onClick:e[26]||(e[26]=d=>P.value=null)})])],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(we),t(ze,{align:"right"},{default:s(()=>[Ke(t(f,{flat:"",label:"Cerrar",color:"negative",onClick:e[28]||(e[28]=a=>J())},null,512),[[Ue]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ge,{modelValue:M.value,"onUpdate:modelValue":e[33]||(e[33]=a=>M.value=a)},{default:s(()=>[t(re,{style:{"max-width":"400px"}},{default:s(()=>[t(R,{class:"card-title-gestionar"},{default:s(()=>[c("div",Ta,[N(y(me.value),1),c("b",null,y(z.value),1)])]),_:1}),t(we),t(R,null,{default:s(()=>[t(he,{onSubmit:Je,class:"q-gutter-md"},{default:s(()=>[t(ta,{filled:"",modelValue:U.value,"onUpdate:modelValue":e[30]||(e[30]=a=>U.value=a),options:oe.value,label:"Actividad del Distributivo",rules:[a=>a&&a.length>0||"Seleccione una actividad del distributivo"]},null,8,["modelValue","options","rules"]),t(x,{filled:"",modelValue:j.value,"onUpdate:modelValue":e[31]||(e[31]=a=>j.value=a),label:"Nombre de la actividad especifica",hint:U.value+"-"+j.value.replace(/\s+/g,"_"),"lazy-rules":"",rules:[a=>a&&a.length>0||"Ingrese el nombre de la actividad"]},null,8,["modelValue","hint","rules"]),t(x,{filled:"",type:"number",modelValue:G.value,"onUpdate:modelValue":e[32]||(e[32]=a=>G.value=a),label:"Horas","lazy-rules":"",rules:[a=>a!==null&&a!==""||"Ingrese el n\xFAmero de horas planificadas",a=>a>0||"Ingrese el n\xFAmero de horas planificadas"]},null,8,["modelValue","rules"]),t(we),c("div",null,[t(f,{label:"Cancelar",onClick:W,flat:"",color:"negative",class:"q-ml-sm"}),t(f,{label:"Guardar",type:"submit",color:"positive"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ge,{modelValue:B.value,"onUpdate:modelValue":e[36]||(e[36]=a=>B.value=a),persistent:""},{default:s(()=>[t(re,null,{default:s(()=>[t(R,{class:"row items-center"},{default:s(()=>[t(la,{icon:"warning",color:"warning","text-color":"white"}),c("span",Ra,[N("\xBFEst\xE1 seguro en eliminar la actividad especifica "),c("b",null,y(te.value.nombre),1),N("?")])]),_:1}),t(ze,{align:"right"},{default:s(()=>[Ke(t(f,{flat:"",label:"Cancel",color:"negative",onClick:e[34]||(e[34]=a=>B.value=!1)},null,512),[[Ue]]),t(f,{flat:"",label:"Aceptar",color:"primary",onClick:e[35]||(e[35]=a=>je())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(i(),b("h6",va,"No existe un periodo academico activo"))]))}};export{nl as default};
